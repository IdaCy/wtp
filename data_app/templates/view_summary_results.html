{% extends 'base.html' %} {# !! comment like this #}

{% block content %}
<h1>Summary of Records</h1>

<!-- Habitat selection form -->
<form id="habitat_form">
    <label for="habitat">Select Habitat:</label>
    <select id="habitat" name="habitat" onchange="submitForm()">
        <option value="">Please select</option>
        <option value="Freshwater">Freshwater</option>
        <option value="Marine">Marine</option>
        <option value="Terrestrial">Terrestrial</option>
    </select>
</form>

<!-- Data table -->
<table>
    <thead>
        <tr>
            <th>Element</th>
            <th>Arithmetic Mean CR</th>
            <th>Arith Standard Deviation</th>
            <th>Geometric Mean CR</th>
            <th>Geo Standard Deviation</th>
            <th>Min</th>
            <th>Max</th>
            <th>N</th>
            <th>Reference ID</th>
        </tr>
    </thead>
    <tbody>
        {% for item in datacr_list %}
        <tr>
            <td>{{ item.radionuclide__element__element_symbol }}</td>
            <td>{{ item.arith_mean_cr }}</td>
            <td>{{ item.arith_std_dev }}</td>
            <td>{{ item.geo_mean_cr }}</td>
            <td>{{ item.geo_std_dev }}</td>
            <td>{{ item.sum_crn }}</td>
            <td>{{ item.min_cr }}</td>
            <td>{{ item.max_cr }}</td>
            <td>{{ item.reference_ids }}</td>
        </tr>
        {% empty %}
        <tr><td colspan="3">No data found.</td></tr>
        {% endfor %}
    </tbody>
</table>

<script>
function submitForm() {
    var habitat = document.getElementById('habitat').value;
    var form = document.getElementById('habitat_form');
    form.action = '/view_summary_results/?habitat=' + habitat;
    form.submit();
}
</script>
{% endblock %}
